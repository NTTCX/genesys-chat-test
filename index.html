<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NTT Data IT-Service Desk - Genesys Cloud Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.4)), 
                        url('background.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 60px 0 40px 0;
            margin-bottom: 60px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .ntt-logo {
            width: 200px;
            height: auto;
            max-height: 80px;
            object-fit: contain;
        }

        .tagline {
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 15px;
            opacity: 0.95;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.8;
            font-weight: 300;
        }

        /* Service Icons Row */
        .services-icons {
            display: flex;
            justify-content: center;
            gap: 80px;
            margin: 80px 0;
            flex-wrap: wrap;
        }

        .service-icon-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 30px;
            border-radius: 20px;
            background: rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            min-width: 140px;
        }

        .service-icon-card:hover {
            transform: translateY(-10px) scale(1.05);
            background: rgba(255,255,255,0.15);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .service-icon-card.active {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-5px);
        }

        .service-icon {
            font-size: 4rem;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .service-icon-card:hover .service-icon {
            transform: scale(1.1);
        }

        .service-name {
            font-size: 1.1rem;
            font-weight: 500;
            text-align: center;
        }

        /* Detail Section */
        .service-details {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255,255,255,0.2);
            min-height: 400px;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .detail-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .detail-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .detail-action {
            text-align: center;
            margin: 30px 0;
        }

        .action-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #0066cc, #004499);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            background: linear-gradient(135deg, #0077dd, #0055aa);
        }

        /* Form Styles */
        .service-form {
            margin-top: 30px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            opacity: 0.9;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #66ccff;
            background: rgba(255,255,255,0.15);
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .phone-display {
            text-align: center;
            font-size: 2rem;
            font-weight: 600;
            color: #66ccff;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
        }

        /* Chat Container */
        .chat-container {
            width: 100%;
            height: 500px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            background: rgba(255,255,255,0.05);
            padding: 20px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            opacity: 0.8;
        }

        .chat-placeholder {
            text-align: center;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .services-icons {
                gap: 40px;
            }
            
            .service-icon {
                font-size: 3rem;
            }
            
            .service-details {
                padding: 25px;
                margin: 0 15px;
            }
            
            .ntt-logo {
                width: 150px;
            }
            
            .tagline {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .services-icons {
                gap: 20px;
            }
            
            .service-icon-card {
                min-width: 100px;
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo-container">
                <img src="ntt-logo.jpg" alt="NTT DATA" class="ntt-logo">
            </div>
            <div class="tagline">IT-Service Desk</div>
            <div class="subtitle">Genesys Cloud Demoplattform - Digitale Transformation f√ºr Ihr Unternehmen</div>
        </header>

        <!-- Service Icons -->
        <div class="services-icons">
            <div class="service-icon-card" onclick="showService('call')" id="icon-call">
                <div class="service-icon">üìû</div>
                <div class="service-name">Inbound Call</div>
            </div>
            
            <div class="service-icon-card" onclick="showService('callback')" id="icon-callback">
                <div class="service-icon">üìÖ</div>
                <div class="service-name">R√ºckruf</div>
            </div>
            
            <div class="service-icon-card" onclick="showService('email')" id="icon-email">
                <div class="service-icon">‚úâÔ∏è</div>
                <div class="service-name">E-Mail</div>
            </div>
            
            <div class="service-icon-card" onclick="showService('social')" id="icon-social">
                <div class="service-icon">üåê</div>
                <div class="service-name">Social Media</div>
            </div>
        </div>

        <!-- Service Details Section -->
        <div class="service-details" id="service-details">
            <!-- Content wird dynamisch geladen -->
        </div>
    </div>

    <!-- Genesys Bootstrap - BACK TO BASICS -->
    <script type="text/javascript" charset="utf-8">
      (function (g, e, n, es, ys) {
        g['_genesysJs'] = e;
        g[e] = g[e] || function () {
          (g[e].q = g[e].q || []).push(arguments)
        };
        g[e].t = 1 * new Date();
        g[e].c = es;
        ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
      })(window, 'Genesys', 'https://apps.mypurecloud.de/genesys-bootstrap/genesys.min.js', {
        environment: 'prod-euc1',
        deploymentId: '769e1351-f0d1-4485-9dd8-397ea63c615b'
      });

      // Basic ready handler
      Genesys('subscribe', 'ready', function() {
        console.log('Genesys Bootstrap SDK geladen');
        console.log('Verf√ºgbare Funktionen:', Object.keys(Genesys));
        window.genesysReady = true;
      });
    </script>

    <script>
        // Service Content Data
        const serviceContent = {
            call: {
                title: "Inbound Call Service",
                action: "Jetzt anrufen",
                phone: "+49 (0) 211 9462 7000"
            },
            callback: {
                title: "R√ºckruf Service",
                action: "R√ºckruf planen"
            },
            email: {
                title: "E-Mail Support",
                action: "Nachricht senden"
            },
            social: {
                title: "Social Media Support",
                action: "Social Media kontaktieren"
            }
        };

        // Show service details
        function showService(serviceType) {
            console.log('showService called with:', serviceType);
            
            // Remove active state from all icons
            document.querySelectorAll('.service-icon-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Add active state to selected icon
            document.getElementById('icon-' + serviceType).classList.add('active');
            
            const service = serviceContent[serviceType];
            const detailsDiv = document.getElementById('service-details');
            
            let contentHTML = '';
            
            switch(serviceType) {
                case 'call':
                    contentHTML = '<div class="detail-header"><div class="detail-title">' + service.title + '</div></div><div class="phone-display">' + service.phone + '</div><div class="detail-action"><button class="action-button" onclick="initiateCall()">' + service.action + '</button></div>';
                    break;
                    
                case 'callback':
                    contentHTML = '<div class="detail-header"><div class="detail-title">' + service.title + '</div></div><div class="service-form"><div class="form-row"><div class="form-group"><label>Ihr Name *</label><input type="text" placeholder="Vor- und Nachname" required></div><div class="form-group"><label>Telefonnummer *</label><input type="tel" placeholder="+49 ..." required></div></div><div class="form-row"><div class="form-group"><label>Gew√ºnschter Termin *</label><input type="datetime-local" required></div><div class="form-group"><label>Thema</label><select><option>IT-Problem</option><option>Software Support</option><option>Hardware Anfrage</option><option>Beratung</option><option>Sonstiges</option></select></div></div><div class="form-group"><label>Kurze Beschreibung</label><textarea rows="3" placeholder="Beschreiben Sie kurz Ihr Anliegen..."></textarea></div><div class="detail-action"><button class="action-button" onclick="submitCallback()">R√ºckruf best√§tigen</button></div></div>';
                    break;
                    
                case 'email':
                    contentHTML = '<div class="detail-header"><div class="detail-title">' + service.title + '</div></div><div class="service-form"><div class="form-row"><div class="form-group"><label>Ihr Name *</label><input type="text" placeholder="Vor- und Nachname" required></div><div class="form-group"><label>E-Mail Adresse *</label><input type="email" placeholder="ihre.email@unternehmen.de" required></div></div><div class="form-row"><div class="form-group"><label>Betreff *</label><input type="text" placeholder="Kurze Beschreibung Ihres Anliegens" required></div><div class="form-group"><label>Priorit√§t</label><select><option>Normal</option><option>Hoch</option><option>Kritisch</option></select></div></div><div class="form-group"><label>Nachricht *</label><textarea rows="4" placeholder="Beschreiben Sie Ihr Anliegen detailliert..." required></textarea></div><div class="detail-action"><button class="action-button" onclick="submitEmail()">E-Mail senden</button></div></div>';
                    break;
                    
                case 'chat':
                    contentHTML = '<div class="detail-header"><div class="detail-title">' + service.title + '</div></div><div class="detail-action"><button class="action-button" onclick="startMessaging()">' + service.action + '</button></div><div class="chat-container" id="chat-widget-container" style="display: none;"><div class="chat-placeholder"><div style="margin-bottom: 20px;">üí¨</div><div>Web Messaging wird geladen...</div></div></div><div class="debug-section" id="debug-section" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; font-size: 0.9rem;"><div style="font-weight: bold; margin-bottom: 10px;">üîß Debug Informationen:</div><div id="debug-log"></div><button class="action-button" onclick="runDiagnostics()" style="margin-top: 15px; padding: 8px 20px; font-size: 0.9rem;">Diagnose starten</button></div>';
                    break;
                    
                case 'social':
                    contentHTML = '<div class="detail-header"><div class="detail-title">' + service.title + '</div></div><div class="detail-action"><button class="action-button" onclick="openSocialMedia()">' + service.action + '</button></div>';
                    break;
                    
                default:
                    contentHTML = '<div class="detail-header"><div class="detail-title">Service nicht gefunden</div></div>';
            }
            
            detailsDiv.innerHTML = contentHTML;
            detailsDiv.style.display = 'block';
            detailsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Add debug section for chat
            if (serviceType === 'chat') {
                const debugHTML = `
                    <div class="debug-section" id="debug-section" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px; font-size: 0.9rem;">
                        <div style="font-weight: bold; margin-bottom: 10px; color: #ffcc66;">üîß Debug Informationen:</div>
                        <div id="debug-log" style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; max-height: 200px; overflow-y: auto; font-family: monospace; font-size: 0.85rem;"></div>
                        <button class="action-button" onclick="runDiagnostics()" style="margin-top: 15px; padding: 8px 20px; font-size: 0.9rem;">üîß Diagnose starten</button>
                    </div>
                `;
                detailsDiv.innerHTML += debugHTML;
            }
        }

        // Action handlers
        function initiateCall() {
            alert('Click-to-Dial wird mit Genesys Platform API implementiert');
        }

        function submitCallback() {
            alert('Callback-Request wird √ºber Genesys API gesendet');
        }

        function submitEmail() {
            alert('E-Mail wird √ºber Backend-Integration versendet');
        }

        function startMessaging() {
            console.log('Testing Basic Genesys Integration...');
            
            const chatContainer = document.getElementById('chat-widget-container');
            const debugSection = document.getElementById('debug-section');
            const debugLog = document.getElementById('debug-log');
            
            if (chatContainer) {
                chatContainer.style.display = 'block';
                chatContainer.innerHTML = '<div class="chat-placeholder"><div style="margin-bottom: 20px;">üîß</div><div>Basic Genesys Integration Test...</div></div>';
            }
            
            if (debugSection && debugLog) {
                debugSection.style.display = 'block';
                debugLog.innerHTML = '';
                addDebugLog('üîß === BASIC GENESYS TEST ===');
            }
            
            // Wait for Genesys to be ready
            if (window.genesysReady && typeof Genesys !== 'undefined') {
                runBasicGenesysTest();
            } else {
                addDebugLog('‚è≥ Warte auf Genesys Bootstrap SDK...');
                
                let attempts = 0;
                const checkInterval = setInterval(function() {
                    attempts++;
                    addDebugLog('üîÑ Versuch ' + attempts + '/5 - Pr√ºfe Genesys SDK...');
                    
                    if (window.genesysReady && typeof Genesys !== 'undefined') {
                        clearInterval(checkInterval);
                        addDebugLog('‚úÖ Genesys SDK geladen nach ' + attempts + ' Versuchen');
                        runBasicGenesysTest();
                    } else if (attempts >= 5) {
                        clearInterval(checkInterval);
                        addDebugLog('‚ùå Genesys SDK konnte nicht geladen werden');
                        showBasicTestResults();
                    }
                }, 2000);
            }
        }

        function runBasicGenesysTest() {
            addDebugLog('üß™ F√ºhre Basic Genesys Tests durch...');
            
            // Test 1: SDK Verf√ºgbarkeit
            if (typeof Genesys !== 'undefined') {
                addDebugLog('‚úÖ Genesys SDK: Verf√ºgbar');
                addDebugLog('üîç Genesys Type: ' + typeof Genesys);
                
                try {
                    addDebugLog('üìã Genesys Properties: ' + Object.keys(Genesys).slice(0, 5).join(', ') + '...');
                } catch (e) {
                    addDebugLog('‚ö†Ô∏è Kann Genesys Properties nicht lesen');
                }
            } else {
                addDebugLog('‚ùå Genesys SDK: Nicht verf√ºgbar');
            }
            
            // Test 2: Basic Commands
            addDebugLog('');
            addDebugLog('üß™ === BASIC COMMAND TESTS ===');
            
            const basicCommands = [
                'version',
                'status',
                'info'
            ];
            
            basicCommands.forEach(function(cmd) {
                try {
                    const result = Genesys(cmd);
                    addDebugLog('‚úÖ Genesys("' + cmd + '"): ' + (result || 'OK'));
                } catch (e) {
                    addDebugLog('‚ùå Genesys("' + cmd + '"): ' + e.message);
                }
            });
            
            // Test 3: Plugin Detection (but don't load)
            addDebugLog('');
            addDebugLog('üîç === PLUGIN DETECTION ===');
            
            // Check what happens when we ask about plugins (without loading)
            try {
                const plugins = ['webchat', 'messenger', 'webmessaging'];
                plugins.forEach(function(plugin) {
                    try {
                        // Try to get plugin info without loading
                        addDebugLog('üîç Plugin "' + plugin + '": Checking...');
                        // Don't actually call the plugin, just log that we're checking
                    } catch (e) {
                        addDebugLog('‚ùå Plugin "' + plugin + '": ' + e.message);
                    }
                });
            } catch (e) {
                addDebugLog('‚ùå Plugin check failed: ' + e.message);
            }
            
            // Test 4: Try simple open (without expecting plugins)
            addDebugLog('');
            addDebugLog('üöÄ === SIMPLE OPEN TEST ===');
            
            try {
                Genesys('open');
                addDebugLog('‚úÖ Genesys("open"): Command sent');
                
                // Check if anything appeared
                setTimeout(function() {
                    checkForAnyGenesysElements();
                }, 3000);
                
            } catch (e) {
                addDebugLog('‚ùå Genesys("open"): ' + e.message);
                checkForAnyGenesysElements();
            }
        }

        function checkForAnyGenesysElements() {
            addDebugLog('');
            addDebugLog('üîç === DOM INSPECTION ===');
            
            // Look for ANY Genesys-related elements
            const allElements = document.querySelectorAll('*');
            let genesysElements = [];
            
            for (let i = 0; i < allElements.length; i++) {
                const el = allElements[i];
                const className = el.className ? el.className.toString().toLowerCase() : '';
                const id = el.id ? el.id.toLowerCase() : '';
                const tagName = el.tagName.toLowerCase();
                
                if (className.includes('genesys') || id.includes('genesys') || 
                    className.includes('cx-') || id.includes('cx-') ||
                    (tagName === 'iframe' && (el.src.includes('genesys') || el.src.includes('pure') || el.src.includes('chat')))) {
                    
                    genesysElements.push({
                        tag: tagName,
                        class: className,
                        id: id,
                        src: el.src || '',
                        visible: el.offsetHeight > 0 && el.offsetWidth > 0
                    });
                }
            }
            
            if (genesysElements.length > 0) {
                addDebugLog('‚úÖ Gefundene Genesys Elemente: ' + genesysElements.length);
                genesysElements.forEach(function(el, index) {
                    addDebugLog('üìã Element ' + (index + 1) + ': ' + el.tag + 
                              (el.class ? ' class="' + el.class + '"' : '') +
                              (el.id ? ' id="' + el.id + '"' : '') +
                              ' visible=' + el.visible);
                });
            } else {
                addDebugLog('‚ùå Keine Genesys Elemente im DOM gefunden');
            }
            
            showBasicTestResults();
        }

        function showBasicTestResults() {
            addDebugLog('');
            addDebugLog('üìä === TEST ERGEBNISSE ===');
            
            const chatContainer = document.getElementById('chat-widget-container');
            
            if (typeof Genesys !== 'undefined') {
                addDebugLog('üéØ FAZIT: Genesys SDK ist geladen, aber keine Widgets erscheinen');
                addDebugLog('üí° N√ÑCHSTER SCHRITT: Deployment-Typ pr√ºfen');
                
                if (chatContainer) {
                    chatContainer.innerHTML = `
                        <div style="background: rgba(255,255,255,0.9); color: #333; padding: 25px; border-radius: 15px;">
                            <h3 style="color: #0066cc; margin: 0 0 20px 0;">üß™ Basic Genesys Test Ergebnisse</h3>
                            
                            <div style="background: #f0f8ff; padding: 15px; border-radius: 8px; border-left: 4px solid #0066cc; margin-bottom: 20px;">
                                <strong>‚úÖ SDK Status:</strong> Genesys Bootstrap SDK ist geladen und funktionsf√§hig
                            </div>
                            
                            <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
                                <strong>‚ö†Ô∏è Problem:</strong> Keine Chat/Messaging Widgets werden erstellt
                            </div>
                            
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                                <strong>üîç M√∂gliche Ursachen:</strong><br>
                                ‚Ä¢ Deployment ist nicht f√ºr "Web Chat" konfiguriert<br>
                                ‚Ä¢ AI Studio Bot ben√∂tigt spezielles Deployment-Template<br>
                                ‚Ä¢ Queue oder Flow nicht korrekt zugewiesen<br>
                                ‚Ä¢ Deployment-Status nicht "Active"
                            </div>
                            
                            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                <button onclick="showDeploymentAdvice()" style="padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer;">üí° Deployment Beratung</button>
                                <button onclick="openGenesysCloudMessaging()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">‚òÅÔ∏è Genesys Cloud</button>
                            </div>
                        </div>
                    `;
                }
            } else {
                addDebugLog('‚ùå FAZIT: Genesys SDK konnte nicht geladen werden');
                
                if (chatContainer) {
                    chatContainer.innerHTML = `
                        <div style="background: rgba(220,53,69,0.1); color: #721c24; padding: 25px; border-radius: 15px; border: 1px solid rgba(220,53,69,0.2);">
                            <h3 style="color: #dc3545; margin: 0 0 15px 0;">‚ùå SDK Loading Failed</h3>
                            <p>Das Genesys Bootstrap SDK konnte nicht geladen werden.</p>
                            <p><strong>M√∂gliche Ursachen:</strong></p>
                            <ul>
                                <li>Deployment ID ist ung√ºltig</li>
                                <li>Environment ist falsch</li>
                                <li>Netzwerk-Verbindungsprobleme</li>
                            </ul>
                        </div>
                    `;
                }
            }
        }

        function showDeploymentAdvice() {
            const advice = `DEPLOYMENT BERATUNG:

AKTUELLER STATUS:
‚úÖ Genesys SDK l√§dt erfolgreich
‚ùå Keine Chat-Widgets erscheinen

PROBLEM ANALYSE:
Ihr Deployment (769e1351-f0d1-4485-9dd8-397ea63c615b) ist m√∂glicherweise nicht f√ºr Web Chat konfiguriert.

L√ñSUNGSSCHRITTE:

1. DEPLOYMENT √úBERPR√úFEN:
   ‚Ä¢ Genesys Cloud ‚Üí Admin ‚Üí Contact Center ‚Üí Web Chat Deployments
   ‚Ä¢ Suchen Sie nach Ihrer ID: 769e1351-f0d1-4485-9dd8-397ea63c615b
   ‚Ä¢ Status muss "Active" sein

2. CHANNEL KONFIGURATION:
   ‚Ä¢ Im Deployment ‚Üí Configuration Tab
   ‚Ä¢ "Web Chat" Channel muss aktiviert sein
   ‚Ä¢ Queue muss zugewiesen sein

3. AI STUDIO BOT:
   ‚Ä¢ Bot muss als "Inbound Message Flow" konfiguriert sein
   ‚Ä¢ Flow muss "Published" status haben
   ‚Ä¢ Bot muss der Queue zugewiesen sein

4. ALTERNATIVE: NEUES DEPLOYMENT
   ‚Ä¢ Template: "Web Chat" (nicht "Web Messaging")
   ‚Ä¢ Channel: Web Chat aktivieren
   ‚Ä¢ Ihren AI Studio Bot zuweisen

EMPFEHLUNG:
Erstellen Sie ein neues Deployment mit dem "Web Chat" Template speziell f√ºr Website-Integration.`;

            alert(advice);
            addDebugLog('üí° Deployment Beratung angezeigt');
        }

        function checkForWebMessagingWidget() {
            // Look for Web Messaging specific elements
            const selectors = [
                // Web Messaging selectors
                '[data-messenger]',
                '[class*="messenger"]',
                '[id*="messenger"]',
                
                // Genesys Web Messaging selectors  
                '.genesys-messenger',
                '.web-messaging',
                '[data-genesys-messenger]',
                
                // iFrame selectors
                'iframe[src*="messenger"]',
                'iframe[src*="webchat"]',
                'iframe[title*="messenger"]'
            ];
            
            for (let selector of selectors) {
                const elements = document.querySelectorAll(selector);
                if (elements.length > 0) {
                    addDebugLog('üîç Widget gefunden mit Selector: ' + selector);
                    return true;
                }
            }
            return false;
        }

        function showWebMessagingFallback() {
            addDebugLog('üîß Erstelle Web Messaging Fallback...');
            
            const chatContainer = document.getElementById('chat-widget-container');
            if (chatContainer) {
                chatContainer.innerHTML = `
                    <div style="background: linear-gradient(135deg, #0066cc, #004499); border-radius: 15px; padding: 0; overflow: hidden; min-height: 500px; position: relative;">
                        <!-- Header -->
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.2);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;">ü§ñ</div>
                                <div>
                                    <h3 style="color: white; margin: 0; font-size: 1.2rem;">IT-Service Desk AI Studio Bot</h3>
                                    <p style="color: rgba(255,255,255,0.8); margin: 5px 0 0 0; font-size: 0.9rem;">Deployment: 769e1351-f0d1-4485-9dd8-397ea63c615b</p>
                                </div>
                                <div style="flex: 1;"></div>
                                <div style="background: rgba(255,165,0,0.3); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem;">‚ö†Ô∏è Fallback</div>
                            </div>
                        </div>
                        
                        <!-- Problem Description -->
                        <div style="padding: 20px; background: rgba(255,255,255,0.05);">
                            <div style="background: rgba(255,255,255,0.9); color: #333; padding: 20px; border-radius: 10px; border-left: 4px solid #ff9500;">
                                <h4 style="margin: 0 0 15px 0; color: #ff9500;">‚ö†Ô∏è Web Messaging Widget Problem</h4>
                                <p style="margin: 0 0 15px 0; line-height: 1.6;">
                                    <strong>Status:</strong> Ihr AI Studio Bot Deployment ist korrekt konfiguriert, aber das Web Messaging Widget l√§dt nicht in externe Webseiten.
                                </p>
                                <p style="margin: 0 0 15px 0; line-height: 1.6;">
                                    <strong>M√∂gliche Ursachen:</strong><br>
                                    ‚Ä¢ Web Messaging Service ben√∂tigt m√∂glicherweise spezielle Domain-Konfiguration<br>
                                    ‚Ä¢ AI Studio Bots haben eventuell Einschr√§nkungen f√ºr externe Einbettung<br>
                                    ‚Ä¢ Deployment-Typ ist nicht f√ºr Website-Integration optimiert
                                </p>
                                <p style="margin: 0; line-height: 1.6;">
                                    <strong>Empfehlung:</strong> Testen Sie den Bot direkt in der Genesys Cloud Umgebung oder erstellen Sie ein neues "Website Chat" Deployment.
                                </p>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div style="padding: 20px; background: rgba(255,255,255,0.1);">
                            <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
                                <button onclick="testDirectWebMessaging()" style="padding: 12px 20px; background: white; color: #0066cc; border: none; border-radius: 25px; cursor: pointer; font-weight: 600;">üîß Direkte Integration testen</button>
                                <button onclick="openGenesysCloudMessaging()" style="padding: 12px 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 25px; cursor: pointer;">‚òÅÔ∏è Genesys Cloud √∂ffnen</button>
                                <button onclick="showIntegrationAdvice()" style="padding: 12px 20px; background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); border-radius: 25px; cursor: pointer;">üí° Integration Beratung</button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            addDebugLog('‚úÖ Web Messaging Fallback Interface erstellt');
        }

        function testDirectWebMessaging() {
            addDebugLog('üß™ Teste direkte Web Messaging Integration...');
            
            // Try to load Web Messaging directly
            const testScript = document.createElement('script');
            testScript.src = 'https://apps.mypurecloud.de/webmessaging/v1/messenger.js?deploymentId=769e1351-f0d1-4485-9dd8-397ea63c615b&environment=prod-euc1';
            testScript.onload = function() {
                addDebugLog('‚úÖ Alternative Web Messaging URL erfolgreich geladen');
                alert('Alternative Web Messaging URL gefunden! Checke die Console f√ºr Details.');
            };
            testScript.onerror = function() {
                addDebugLog('‚ùå Alternative Web Messaging URL nicht verf√ºgbar');
                alert('Alternative Integration fehlgeschlagen. M√∂glicherweise ist dieser Deployment-Typ nicht f√ºr externe Websites vorgesehen.');
            };
            document.head.appendChild(testScript);
        }

        function showIntegrationAdvice() {
            const advice = `INTEGRATION BERATUNG:

Das Problem: Ihr AI Studio Bot Deployment funktioniert in Genesys Cloud, aber nicht auf externen Websites.

L√ñSUNGSANS√ÑTZE:

1. NEUES DEPLOYMENT ERSTELLEN:
   ‚Ä¢ Admin ‚Üí Message ‚Üí Messenger Deployments  
   ‚Ä¢ "Create New" ‚Üí Template: "Website Chat"
   ‚Ä¢ Channel: "Web Messaging" aktivieren
   ‚Ä¢ AI Studio Bot zuweisen

2. DEPLOYMENT-TYP PR√úFEN:
   ‚Ä¢ Aktuelles Deployment ist f√ºr "Service" konfiguriert
   ‚Ä¢ Eventuell "Website" Template verwenden

3. ALTERNATIVE INTEGRATION:
   ‚Ä¢ iframe-Embed des Genesys Cloud Messaging
   ‚Ä¢ API-basierte Integration
   ‚Ä¢ Hybrid-Ansatz mit Weiterleitung

4. GENESYS SUPPORT:
   ‚Ä¢ Kontaktieren Sie Genesys Support
   ‚Ä¢ Frage: "AI Studio Bot Web Messaging externe Website"

DEPLOYMENT DETAILS:
‚Ä¢ ID: 769e1351-f0d1-4485-9dd8-397ea63c615b
‚Ä¢ Environment: prod-euc1
‚Ä¢ Type: Web Messaging Service`;

            alert(advice);
            addDebugLog('üí° Integration Beratung angezeigt');
        }

        function checkForActiveMessenger() {
            // Look for any sign of active messenger
            const messengerSelectors = [
                '[class*="genesys"]',
                '[id*="genesys"]', 
                '[class*="messenger"]',
                '[id*="messenger"]',
                'iframe[src*="genesys"]',
                'iframe[src*="messaging"]'
            ];
            
            for (let selector of messengerSelectors) {
                const elements = document.querySelectorAll(selector);
                if (elements.length > 0) {
                    return true;
                }
            }
            return false;
        }

        function createAdvancedMessengerInterface() {
            addDebugLog('üîß Erstelle erweiterte Messenger-Schnittstelle...');
            
            const chatContainer = document.getElementById('chat-widget-container');
            if (chatContainer) {
                chatContainer.innerHTML = `
                    <div style="background: linear-gradient(135deg, #0066cc, #004499); border-radius: 15px; padding: 0; overflow: hidden; min-height: 500px; position: relative;">
                        <!-- Header -->
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.2);">
                            <div style="display: flex; align-items: center; gap: 15px;">
                                <div style="width: 50px; height: 50px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;">ü§ñ</div>
                                <div>
                                    <h3 style="color: white; margin: 0; font-size: 1.2rem;">IT-Service Desk AI Assistant</h3>
                                    <p style="color: rgba(255,255,255,0.8); margin: 5px 0 0 0; font-size: 0.9rem;">Powered by Genesys AI Studio</p>
                                </div>
                                <div style="flex: 1;"></div>
                                <div style="background: rgba(0,255,0,0.2); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem;">‚óè Online</div>
                            </div>
                        </div>
                        
                        <!-- Chat Area -->
                        <div id="chat-messages" style="padding: 20px; min-height: 300px; background: rgba(255,255,255,0.05);">
                            <div style="background: rgba(255,255,255,0.9); color: #333; padding: 15px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid #0066cc;">
                                <strong>ü§ñ AI Assistant:</strong><br><br>
                                Hallo! Ich bin Ihr AI-gest√ºtzter IT-Service Desk Assistent.<br><br>
                                <strong>Ich kann Ihnen helfen bei:</strong><br>
                                ‚Ä¢ IT-Problemen und St√∂rungen<br>
                                ‚Ä¢ Software-Support<br>
                                ‚Ä¢ Hardware-Anfragen<br>
                                ‚Ä¢ Account-Verwaltung<br>
                                ‚Ä¢ Allgemeine IT-Beratung<br><br>
                                <em>Wie kann ich Ihnen heute helfen?</em>
                            </div>
                        </div>
                        
                        <!-- Input Area -->
                        <div style="padding: 20px; background: rgba(255,255,255,0.1); border-top: 1px solid rgba(255,255,255,0.2);">
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="chat-input" placeholder="Beschreiben Sie Ihr IT-Problem..." style="flex: 1; padding: 12px 15px; border: 1px solid rgba(255,255,255,0.3); border-radius: 25px; background: rgba(255,255,255,0.9); font-size: 1rem;" onkeypress="if(event.key==='Enter') sendAdvancedMessage()">
                                <button onclick="sendAdvancedMessage()" style="padding: 12px 20px; background: white; color: #0066cc; border: none; border-radius: 25px; cursor: pointer; font-weight: 600; min-width: 80px;">Senden</button>
                            </div>
                            <div style="margin-top: 10px; text-align: center;">
                                <button onclick="startGenesysMessenger()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 8px 16px; border-radius: 15px; cursor: pointer; font-size: 0.8rem; margin: 0 5px;">üîó Genesys Messenger</button>
                                <button onclick="openGenesysCloudMessaging()" style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); padding: 8px 16px; border-radius: 15px; cursor: pointer; font-size: 0.8rem; margin: 0 5px;">‚òÅÔ∏è Cloud Messaging</button>
                            </div>
                        </div>
                        
                        <!-- Status -->
                        <div style="position: absolute; top: 10px; right: 15px; background: rgba(0,0,0,0.3); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.7rem;">
                            Deployment: ${window.location.hostname}
                        </div>
                    </div>
                `;
            }
            
            addDebugLog('‚úÖ Erweiterte Messenger-Schnittstelle erstellt');
            
            // Auto-focus input
            setTimeout(function() {
                const input = document.getElementById('chat-input');
                if (input) input.focus();
            }, 500);
        }

        function sendAdvancedMessage() {
            const input = document.getElementById('chat-input');
            const messagesArea = document.getElementById('chat-messages');
            
            if (input && messagesArea && input.value.trim()) {
                const userMessage = input.value.trim();
                
                // Add user message
                const userMsgDiv = document.createElement('div');
                userMsgDiv.style.cssText = 'text-align: right; margin-bottom: 15px;';
                userMsgDiv.innerHTML = `<div style="display: inline-block; background: rgba(255,255,255,0.9); color: #333; padding: 10px 15px; border-radius: 10px; max-width: 70%; border-right: 4px solid #0066cc;"><strong>Sie:</strong><br>${userMessage}</div>`;
                messagesArea.appendChild(userMsgDiv);
                
                // Clear input
                input.value = '';
                
                // Add AI response (simulated)
                setTimeout(function() {
                    const aiResponse = getAIResponse(userMessage);
                    const aiMsgDiv = document.createElement('div');
                    aiMsgDiv.style.cssText = 'margin-bottom: 15px;';
                    aiMsgDiv.innerHTML = `<div style="background: rgba(255,255,255,0.9); color: #333; padding: 15px; border-radius: 10px; border-left: 4px solid #0066cc;"><strong>ü§ñ AI Assistant:</strong><br><br>${aiResponse}</div>`;
                    messagesArea.appendChild(aiMsgDiv);
                    
                    // Scroll to bottom
                    messagesArea.scrollTop = messagesArea.scrollHeight;
                }, 1000);
                
                // Scroll to bottom
                messagesArea.scrollTop = messagesArea.scrollHeight;
                
                addDebugLog('üí¨ Chat-Nachricht gesendet: ' + userMessage);
            }
        }

        function getAIResponse(message) {
            const responses = [
                'Ich verstehe Ihr Problem. F√ºr eine detaillierte L√∂sung w√ºrde ich Sie gerne an einen unserer Spezialisten weiterleiten. Der echte AI Studio Bot in Genesys Cloud kann Ihnen noch besser helfen.',
                'Das ist eine interessante Anfrage. Unser AI Studio Bot hat Zugriff auf die komplette Wissensdatenbank und kann Ihnen eine pr√§zise Antwort geben.',
                'Vielen Dank f√ºr Ihre Nachricht. Dies ist eine Demo-Version. Der vollst√§ndige AI Assistant ist √ºber das Genesys Cloud Messaging verf√ºgbar.',
                'Ich notiere Ihr Anliegen. F√ºr eine umfassende Bearbeitung empfehle ich Ihnen, das echte Genesys Messaging-System zu verwenden.',
                'Das klingt nach einem Fall f√ºr unseren Experten-Bot. Klicken Sie auf "Genesys Messenger" um den vollen Service zu nutzen.'
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function startGenesysMessenger() {
            addDebugLog('üîÑ Versuche Genesys Messenger zu starten...');
            
            // Try all available methods
            const methods = [
                () => window.GenesysMessenger && window.GenesysMessenger.open(),
                () => window.Genesys && Genesys('command', 'Messenger.open'),
                () => window.Genesys && Genesys('open')
            ];
            
            let success = false;
            methods.forEach((method, index) => {
                try {
                    method();
                    addDebugLog('‚úÖ Methode ' + (index + 1) + ' erfolgreich');
                    success = true;
                } catch (e) {
                    addDebugLog('‚ùå Methode ' + (index + 1) + ' fehlgeschlagen: ' + e.message);
                }
            });
            
            if (!success) {
                alert('Der Genesys Messenger konnte nicht gestartet werden. Verwenden Sie bitte den Cloud Messaging Link.');
            }
        }

        function checkForMessengerWidget() {
            // Look for Messenger widgets with broader search
            const selectors = [
                // Standard Genesys selectors
                '.genesys-messenger',
                '[data-genesys-messenger]',
                '#genesys-messenger',
                '.cx-messenger',
                
                // Genesys widget selectors
                '.genesys-widget',
                '[class*="genesys"]',
                '[id*="genesys"]',
                
                // Generic messenger selectors
                '[class*="messenger"]',
                '[id*="messenger"]',
                
                // Iframe selectors
                'iframe[src*="genesys"]',
                'iframe[src*="messaging"]'
            ];
            
            let foundWidget = null;
            for (let selector of selectors) {
                const elements = document.querySelectorAll(selector);
                if (elements.length > 0) {
                    foundWidget = elements[0];
                    addDebugLog('‚úÖ Widget gefunden: ' + selector + ' (' + elements.length + ' Element(e))');
                    break;
                }
            }
            
            const chatContainer = document.getElementById('chat-widget-container');
            
            if (foundWidget) {
                addDebugLog('üéâ Messenger Widget erfolgreich geladen!');
                if (chatContainer) {
                    chatContainer.innerHTML = '<div class="chat-placeholder"><div style="margin-bottom: 20px;">‚úÖ</div><div><strong>Messenger Widget aktiv!</strong><br>Das Widget sollte sichtbar sein.</div></div>';
                }
            } else {
                addDebugLog('‚ùå Kein Messenger Widget gefunden');
                addDebugLog('üîç Pr√ºfe DOM f√ºr versteckte Widgets...');
                
                // Check for any Genesys-related elements
                const allElements = document.querySelectorAll('*');
                let genesysElements = 0;
                for (let el of allElements) {
                    const className = el.className ? el.className.toString().toLowerCase() : '';
                    const id = el.id ? el.id.toLowerCase() : '';
                    if (className.includes('genesys') || id.includes('genesys') || 
                        className.includes('cx-') || id.includes('cx-')) {
                        genesysElements++;
                    }
                }
                
                addDebugLog('üîç Gefundene Genesys-Elemente im DOM: ' + genesysElements);
                
                if (genesysElements > 0) {
                    addDebugLog('üí° Widget ist geladen aber m√∂glicherweise nicht sichtbar');
                    if (chatContainer) {
                        chatContainer.innerHTML = '<div class="chat-placeholder"><div style="margin-bottom: 20px;">üîç</div><div><strong>Widget teilweise geladen</strong><br>Das Widget existiert aber ist m√∂glicherweise noch nicht vollst√§ndig initialisiert.<br><br><button class="action-button" onclick="forceShowMessenger()" style="margin-top: 15px;">Widget forcieren</button></div></div>';
                    }
                } else {
                    showManualLaunchOption();
                }
            }
        }

        function forceShowMessenger() {
            addDebugLog('üîß Versuche Widget zu forcieren...');
            
            // Try additional Genesys commands to make widget visible
            const commands = [
                'Messenger.show',
                'Messenger.maximize', 
                'Messenger.open',
                'Messenger.start',
                'Widget.show',
                'Widget.open',
                'open'
            ];
            
            commands.forEach(function(cmd) {
                try {
                    if (cmd === 'open') {
                        Genesys(cmd);
                    } else {
                        Genesys('command', cmd);
                    }
                    addDebugLog('üì§ ' + cmd + ' - versucht');
                } catch (e) {
                    addDebugLog('‚ùå ' + cmd + ' - fehlgeschlagen: ' + e.message);
                }
            });
            
            // Try to find and manipulate the widget directly
            setTimeout(function() {
                addDebugLog('üîç Suche Widget zum manuellen Einblenden...');
                
                // Find hidden messenger elements
                const hiddenElements = document.querySelectorAll('[style*="display: none"], [style*="visibility: hidden"], [hidden]');
                let foundHiddenMessenger = false;
                
                hiddenElements.forEach(function(el) {
                    const className = el.className ? el.className.toString().toLowerCase() : '';
                    const id = el.id ? el.id.toLowerCase() : '';
                    
                    if (className.includes('genesys') || className.includes('messenger') || 
                        id.includes('genesys') || id.includes('messenger')) {
                        
                        // Try to show the element
                        el.style.display = 'block';
                        el.style.visibility = 'visible';
                        el.removeAttribute('hidden');
                        
                        // Position it visibly
                        el.style.position = 'fixed';
                        el.style.bottom = '20px';
                        el.style.right = '20px';
                        el.style.zIndex = '9999';
                        
                        addDebugLog('‚úÖ Widget sichtbar gemacht: ' + (className || id || 'unbekannt'));
                        foundHiddenMessenger = true;
                    }
                });
                
                if (foundHiddenMessenger) {
                    addDebugLog('üéâ Widget sollte jetzt sichtbar sein!');
                    const chatContainer = document.getElementById('chat-widget-container');
                    if (chatContainer) {
                        chatContainer.innerHTML = '<div class="chat-placeholder"><div style="margin-bottom: 20px;">‚úÖ</div><div><strong>Widget erfolgreich eingeblendet!</strong><br>Das Messenger-Widget sollte jetzt in der unteren rechten Ecke sichtbar sein.</div></div>';
                    }
                } else {
                    addDebugLog('‚ö†Ô∏è Kein verstecktes Widget gefunden');
                    createCustomMessengerButton();
                }
                
                checkForMessengerWidget();
            }, 2000);
        }

        function createCustomMessengerButton() {
            addDebugLog('üîß Erstelle eigenen Messenger-Button...');
            
            // Create floating messenger button
            const messengerBtn = document.createElement('div');
            messengerBtn.id = 'custom-messenger-btn';
            messengerBtn.innerHTML = 'üí¨';
            messengerBtn.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                background: #0066cc;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 24px;
                color: white;
                cursor: pointer;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 9999;
                transition: all 0.3s ease;
            `;
            
            messengerBtn.addEventListener('click', function() {
                addDebugLog('üöÄ Custom Messenger Button geklickt');
                
                // Try to trigger Genesys messenger
                try {
                    Genesys('command', 'Messenger.open');
                    addDebugLog('üì§ Messenger.open durch Custom Button ausgel√∂st');
                } catch (e) {
                    addDebugLog('‚ùå Custom Button trigger fehlgeschlagen: ' + e.message);
                    // Fallback: Show inline chat
                    showInlineChat();
                }
            });
            
            messengerBtn.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.1)';
                this.style.boxShadow = '0 6px 20px rgba(0,0,0,0.4)';
            });
            
            messengerBtn.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.3)';
            });
            
            document.body.appendChild(messengerBtn);
            addDebugLog('‚úÖ Custom Messenger Button erstellt');
        }

        function showInlineChat() {
            addDebugLog('üí¨ Zeige Inline-Chat als Fallback...');
            
            const chatContainer = document.getElementById('chat-widget-container');
            if (chatContainer) {
                chatContainer.innerHTML = `
                    <div style="background: rgba(255,255,255,0.95); color: #333; border-radius: 15px; padding: 20px; min-height: 400px;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h3 style="color: #0066cc; margin: 0;">IT-Service Desk Chat</h3>
                            <p style="margin: 5px 0; font-size: 0.9rem;">Verbunden mit AI Studio Bot</p>
                        </div>
                        <div style="background: #f5f5f5; border-radius: 10px; padding: 15px; margin-bottom: 15px; min-height: 200px;">
                            <div style="background: white; border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                                <strong>ü§ñ AI Assistant:</strong><br>
                                Hallo! Ich bin Ihr IT-Service Desk Assistent. Wie kann ich Ihnen heute helfen?
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" placeholder="Ihre Nachricht..." style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            <button onclick="sendChatMessage()" style="padding: 10px 20px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer;">Senden</button>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.8rem; color: #666; text-align: center;">
                            Hinweis: Dies ist ein Fallback-Chat. Der echte AI Studio Bot ist √ºber das Genesys Widget verf√ºgbar.
                        </div>
                    </div>
                `;
            }
        }

        function sendChatMessage() {
            alert('Hinweis: Dies ist nur ein Demo-Chat. Der echte AI Studio Bot funktioniert √ºber das Genesys Messenger Widget.');
        }

        function showManualLaunchOption() {
            addDebugLog('üîÑ Zeige manuelle Optionen...');
            
            const chatContainer = document.getElementById('chat-widget-container');
            if (chatContainer) {
                chatContainer.innerHTML = '<div class="chat-placeholder"><div style="margin-bottom: 20px;">üîß</div><div><strong>Widget Integration Problem</strong><br><br>Das Deployment ist korrekt konfiguriert, aber das Widget l√§dt nicht automatisch.<br><br><button class="action-button" onclick="openGenesysCloudMessaging()" style="margin-top: 15px;">Genesys Cloud Messaging √∂ffnen</button><br><br><button class="action-button" onclick="showIntegrationHelp()" style="margin-top: 10px;">Integration Hilfe</button></div></div>';
            }
        }

        function openGenesysCloudMessaging() {
            window.open('https://apps.mypurecloud.de/directory/#/messaging', '_blank');
            addDebugLog('üîó Genesys Cloud Messaging ge√∂ffnet');
        }

        function showIntegrationHelp() {
            const helpText = 'INTEGRATION HILFE:\n\n' +
                           '1. Dein Deployment ist korrekt konfiguriert\n' +
                           '2. Der AI Studio Bot ist verbunden\n' +
                           '3. Das Widget l√§dt aber nicht automatisch\n\n' +
                           'M√ñGLICHE L√ñSUNGEN:\n' +
                           '‚Ä¢ Pr√ºfe ob eine Queue dem Deployment zugewiesen ist\n' +
                           '‚Ä¢ Stelle sicher dass die Queue "Web Messaging" unterst√ºtzt\n' +
                           '‚Ä¢ Pr√ºfe ob der Bot richtig published ist\n' +
                           '‚Ä¢ Teste das Widget zuerst in Genesys Cloud direkt\n\n' +
                           'DEPLOYMENT ID: 769e1351-f0d1-4485-9dd8-397ea63c615b';
            
            alert(helpText);
            addDebugLog('üí° Integration Hilfe angezeigt');
        }

        function addDebugLog(message) {
            const debugLog = document.getElementById('debug-log');
            if (debugLog) {
                const timestamp = new Date().toLocaleTimeString();
                debugLog.innerHTML += '<div style="margin: 2px 0; padding: 2px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">[' + timestamp + '] ' + message + '</div>';
                debugLog.scrollTop = debugLog.scrollHeight;
            }
            console.log('[DEBUG] ' + message);
        }

        function runDiagnostics() {
            const debugLog = document.getElementById('debug-log');
            if (debugLog) {
                debugLog.innerHTML = '';
            }
            
            addDebugLog('üîß === GENESYS CLOUD DIAGNOSE ===');
            addDebugLog('');
            
            // 1. SDK Check
            if (typeof Genesys !== 'undefined') {
                addDebugLog('‚úÖ Genesys SDK: Geladen');
                try {
                    addDebugLog('üìã SDK Version: ' + (Genesys.version || 'Unbekannt'));
                } catch (e) {
                    addDebugLog('‚ö†Ô∏è SDK Version: Nicht verf√ºgbar');
                }
            } else {
                addDebugLog('‚ùå Genesys SDK: NICHT geladen');
                return;
            }
            
            // 2. Environment Check
            addDebugLog('üåê Environment: prod-euc1 (Frankfurt)');
            addDebugLog('üÜî Deployment ID: 769e1351-f0d1-4485-9dd8-397ea63c615b');
            
            // 3. Plugin Check
            addDebugLog('');
            addDebugLog('üîå Plugin-Verf√ºgbarkeit:');
            
            const plugins = ['messenger', 'webmessaging', 'chat', 'webchat'];
            plugins.forEach(function(plugin) {
                try {
                    Genesys('command', plugin + '.ping');
                    addDebugLog('‚úÖ ' + plugin + ': Verf√ºgbar');
                } catch (e) {
                    addDebugLog('‚ùå ' + plugin + ': NICHT verf√ºgbar');
                }
            });
            
            // 4. DOM Check
            addDebugLog('');
            addDebugLog('üñ•Ô∏è DOM-Elemente:');
            const widgets = document.querySelectorAll('[data-genesys-widget], .genesys-widget, #genesys-messenger, .cx-widget');
            if (widgets.length > 0) {
                addDebugLog('‚úÖ Chat-Widgets gefunden: ' + widgets.length);
            } else {
                addDebugLog('‚ùå Keine Chat-Widgets im DOM');
            }
            
            // 5. Empfehlungen
            addDebugLog('');
            addDebugLog('üí° === EMPFEHLUNGEN ===');
            addDebugLog('1Ô∏è‚É£ Gehe zu: Admin ‚Üí Contact Center ‚Üí Web Messaging Deployments');
            addDebugLog('2Ô∏è‚É£ Pr√ºfe ob Deployment aktiv ist');
            addDebugLog('3Ô∏è‚É£ Weise eine Queue dem Deployment zu');
            addDebugLog('4Ô∏è‚É£ Aktiviere "Web Messaging" Channel');
            addDebugLog('5Ô∏è‚É£ Publishe das Deployment');
        }

        function openSocialMedia() {
            alert('Social Media Integrationen werden konfiguriert...');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('NTT Data Genesys Cloud Demo Platform geladen');
        });
    </script>
</body>
</html>
